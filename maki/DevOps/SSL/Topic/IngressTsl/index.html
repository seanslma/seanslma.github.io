<!doctype html><html class=no-js lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=https://seanslma.github.io/maki/DevOps/SSL/Topic/IngressTsl/ rel=canonical><link href=../../curl/ rel=prev><link href=../../../Security/Cert/ rel=next><link href=../../../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.6.15" name=generator><title>Ingress TSL - maki</title><link href=../../../../assets/stylesheets/main.342714a4.min.css rel=stylesheet><link href=../../../../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../../stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL(`../../../..`,location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+`.`+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+`.`+e,JSON.stringify(_))}catch{}};</script><body data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=default dir=ltr><input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox><input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox><label class=md-overlay for=__drawer></label><div data-md-component=skip><a class=md-skip href=#ingress-tsl> Skip to content </a></div><div data-md-component=announce></div><header class=md-header data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a class="md-header__button md-logo" aria-label=maki data-md-component=logo href=../../../.. title=maki> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a><label class="md-header__button md-icon" for=__drawer><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> maki </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Ingress TSL </span></div></div></div><form class=md-header__option data-md-component=palette><input aria-label="Switch to dark mode" class=md-option data-md-color-accent=indigo data-md-color-media data-md-color-primary=indigo data-md-color-scheme=default id=__palette_0 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label><input aria-label="Switch to light mode" class=md-option data-md-color-accent=indigo data-md-color-media data-md-color-primary=indigo data-md-color-scheme=slate id=__palette_1 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false><label class="md-search__icon md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav aria-label=Search class=md-search__options><button class="md-search__icon md-icon" aria-label=Clear tabindex=-1 title=Clear type=reset><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap data-md-scrollfix tabindex=0><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/seanslma/maki> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>GitHub</div> </a></div></nav></header><div class=md-container data-md-component=container><nav aria-label=Tabs class=md-tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a class=md-tabs__link href=../../../..> About </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../AI/ChatGPT/> AI </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../AWS/CDN/> AWS </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Azure/Advisor/> Azure </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Coding/Notepad%2B%2B/> Coding </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Cybersecurity/Cybersecurity/> Cybersecurity </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Data/Data/> Data </a><li class="md-tabs__item md-tabs__item--active"><a class=md-tabs__link href=../../../DevOps/> DevOps </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Documentation/Jira/> Documentation </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Energy/Inertia/> Energy </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Learn/Book/> Learn </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../ML/Backtest/> ML </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Optimizaton/Convex/> Optimizaton </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../PowerBI/Basic/> PowerBI </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../Python/NAN/> Python </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../SQL/Database/> SQL </a><li class=md-tabs__item><a class=md-tabs__link href=../../../../System/Behavior/> System </a></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a class="md-nav__button md-logo" aria-label=maki data-md-component=logo href=../../../.. title=maki> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> maki</label><div class=md-nav__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/seanslma/maki> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>GitHub</div> </a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../../../..> <span class=md-ellipsis> About </span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../AI/ChatGPT/> <span class=md-ellipsis> AI </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../AWS/CDN/> <span class=md-ellipsis> AWS </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Azure/Advisor/> <span class=md-ellipsis> Azure </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Coding/Notepad%2B%2B/> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Cybersecurity/Cybersecurity/> <span class=md-ellipsis> Cybersecurity </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Data/Data/> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle" checked id=__nav_8 type=checkbox> <label class=md-nav__link for=__nav_8 id=__nav_8_label><span class=md-ellipsis> DevOps </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=true aria-labelledby=__nav_8_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_8><span class="md-nav__icon md-icon"></span> DevOps</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../../../DevOps/> <span class=md-ellipsis> DevOps </span> </a><li class=md-nav__item><a class=md-nav__link href=../../../Resource/> <span class=md-ellipsis> Resource </span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../%20Prometheus/Prometheus/> <span class=md-ellipsis> Prometheus </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../ArgoCD/ACR/> <span class=md-ellipsis> ArgoCD </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Buildx/Buildctl/> <span class=md-ellipsis> Buildx </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../CICD/Bamboo/> <span class=md-ellipsis> CICD </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Config/Ansible/> <span class=md-ellipsis> Config </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Container/Install/> <span class=md-ellipsis> Container </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Docker/Add/> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Env/Certificate/> <span class=md-ellipsis> Env </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Git/Branch/> <span class=md-ellipsis> Git </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../GitHub/Actions/> <span class=md-ellipsis> GitHub </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Helm/CLI/> <span class=md-ellipsis> Helm </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Kubernetes/API/> <span class=md-ellipsis> Kubernetes </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Kustomize/Kustomize/> <span class=md-ellipsis> Kustomize </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../MonitorPerf/Dynatrace/> <span class=md-ellipsis> MonitorPerf </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../MonitorServer/Datadog/> <span class=md-ellipsis> MonitorServer </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Network/Authorization/> <span class=md-ellipsis> Network </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Nginx/FileServer/> <span class=md-ellipsis> Nginx </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Python/Conda/> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-nav__toggle md-toggle" checked id=__nav_8_21 type=checkbox> <label class=md-nav__link for=__nav_8_21 id=__nav_8_21_label tabindex=0><span class=md-ellipsis> SSL </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=true aria-labelledby=__nav_8_21_label class=md-nav data-md-level=2><label class=md-nav__title for=__nav_8_21><span class="md-nav__icon md-icon"></span> SSL</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../../Authority/> <span class=md-ellipsis> Authority </span> </a><li class=md-nav__item><a class=md-nav__link href=../../CA/> <span class=md-ellipsis> CA </span> </a><li class=md-nav__item><a class=md-nav__link href=../../CAIntermediate/> <span class=md-ellipsis> Intermediate CA </span> </a><li class=md-nav__item><a class=md-nav__link href=../../CAMicrosoft/> <span class=md-ellipsis> CA microsoft </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Cert/> <span class=md-ellipsis> Cert </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Config/> <span class=md-ellipsis> Config </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Docker/> <span class=md-ellipsis> Docker </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Error/> <span class=md-ellipsis> Error </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Extension/> <span class=md-ellipsis> Extension </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Issuer/> <span class=md-ellipsis> Issuer </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Kubernetes/> <span class=md-ellipsis> Kubernetes </span> </a><li class=md-nav__item><a class=md-nav__link href=../../LDAP/> <span class=md-ellipsis> ldap </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Link/> <span class=md-ellipsis> Link </span> </a><li class=md-nav__item><a class=md-nav__link href=../../OpenSSL/> <span class=md-ellipsis> OpenSSL </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Pfx/> <span class=md-ellipsis> Pfx </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Renew/> <span class=md-ellipsis> Renew </span> </a><li class=md-nav__item><a class=md-nav__link href=../../SSL/> <span class=md-ellipsis> SSL </span> </a><li class=md-nav__item><a class=md-nav__link href=../../SelfSigned/> <span class=md-ellipsis> Browser SSL self-signed </span> </a><li class=md-nav__item><a class=md-nav__link href=../../Subject/> <span class=md-ellipsis> Subject </span> </a><li class=md-nav__item><a class=md-nav__link href=../../curl/> <span class=md-ellipsis> curl </span> </a><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-nav__toggle md-toggle" checked id=__nav_8_21_21 type=checkbox> <label class=md-nav__link for=__nav_8_21_21 id=__nav_8_21_21_label tabindex=0><span class=md-ellipsis> Topic </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=true aria-labelledby=__nav_8_21_21_label class=md-nav data-md-level=3><label class=md-nav__title for=__nav_8_21_21><span class="md-nav__icon md-icon"></span> Topic</label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Ingress TSL </span> <span class="md-nav__icon md-icon"></span></label> <a class="md-nav__link md-nav__link--active" href=./> <span class=md-ellipsis> Ingress TSL </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#generate-self-signed-tls> <span class=md-ellipsis> generate self signed tls </span> </a><li class=md-nav__item><a class=md-nav__link href=#extract-certificate-key-pair> <span class=md-ellipsis> Extract certificate key pair </span> </a><li class=md-nav__item><a class=md-nav__link href=#update-server-certificate-in-kubernetes> <span class=md-ellipsis> Update server certificate in Kubernetes </span> </a> <nav aria-label="Update server certificate in Kubernetes" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#check-the-cert-works-or-not> <span class=md-ellipsis> check the cert works or not </span> </a><li class=md-nav__item><a class=md-nav__link href=#check-the-ingress-controller-logs> <span class=md-ellipsis> check the ingress controller logs </span> </a><li class=md-nav__item><a class=md-nav__link href=#tls-failed-to-parse-private-key> <span class=md-ellipsis> tls: failed to parse private key </span> </a><li class=md-nav__item><a class=md-nav__link href=#tls-private-key-does-not-match-public-key> <span class=md-ellipsis> tls: private key does not match public key </span> </a><li class=md-nav__item><a class=md-nav__link href=#skipping-addition-of-certificate-for-domains-examplecomexamplecom-to-entrypoint-https-as-it-already-exists-for-this-entrypoint> <span class=md-ellipsis> Skipping addition of certificate for domain(s) \"example.com,*.example.com\", to EntryPoint https, as it already exists for this Entrypoint </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#install-root-and-intermediate-ca-files-for-devexamplecom-domain> <span class=md-ellipsis> Install root and intermediate CA files for dev.example.com domain </span> </a></ul></nav></ul></nav></ul></nav><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Security/Cert/> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Terraform/Bicep/> <span class=md-ellipsis> Terraform </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Terragrunt/Backend/> <span class=md-ellipsis> Terragrunt </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Test/Locust/> <span class=md-ellipsis> Test </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../Yaml/String/> <span class=md-ellipsis> Yaml </span> <span class="md-nav__icon md-icon"></span> </a></ul></nav><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Documentation/Jira/> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Energy/Inertia/> <span class=md-ellipsis> Energy </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Learn/Book/> <span class=md-ellipsis> Learn </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../ML/Backtest/> <span class=md-ellipsis> ML </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Optimizaton/Convex/> <span class=md-ellipsis> Optimizaton </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../PowerBI/Basic/> <span class=md-ellipsis> PowerBI </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../Python/NAN/> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../SQL/Database/> <span class=md-ellipsis> SQL </span> <span class="md-nav__icon md-icon"></span> </a><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a class=md-nav__link href=../../../../System/Behavior/> <span class=md-ellipsis> System </span> <span class="md-nav__icon md-icon"></span> </a></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav aria-label="Table of contents" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#generate-self-signed-tls> <span class=md-ellipsis> generate self signed tls </span> </a><li class=md-nav__item><a class=md-nav__link href=#extract-certificate-key-pair> <span class=md-ellipsis> Extract certificate key pair </span> </a><li class=md-nav__item><a class=md-nav__link href=#update-server-certificate-in-kubernetes> <span class=md-ellipsis> Update server certificate in Kubernetes </span> </a> <nav aria-label="Update server certificate in Kubernetes" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#check-the-cert-works-or-not> <span class=md-ellipsis> check the cert works or not </span> </a><li class=md-nav__item><a class=md-nav__link href=#check-the-ingress-controller-logs> <span class=md-ellipsis> check the ingress controller logs </span> </a><li class=md-nav__item><a class=md-nav__link href=#tls-failed-to-parse-private-key> <span class=md-ellipsis> tls: failed to parse private key </span> </a><li class=md-nav__item><a class=md-nav__link href=#tls-private-key-does-not-match-public-key> <span class=md-ellipsis> tls: private key does not match public key </span> </a><li class=md-nav__item><a class=md-nav__link href=#skipping-addition-of-certificate-for-domains-examplecomexamplecom-to-entrypoint-https-as-it-already-exists-for-this-entrypoint> <span class=md-ellipsis> Skipping addition of certificate for domain(s) \"example.com,*.example.com\", to EntryPoint https, as it already exists for this Entrypoint </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#install-root-and-intermediate-ca-files-for-devexamplecom-domain> <span class=md-ellipsis> Install root and intermediate CA files for dev.example.com domain </span> </a></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><h1 id=ingress-tsl>Ingress TSL<a title="Permanent link" class=headerlink href=#ingress-tsl>¬∂</a></h1><p>how to update kubernetes ingress tsl<h2 id=generate-self-signed-tls>generate self signed tls<a title="Permanent link" class=headerlink href=#generate-self-signed-tls>¬∂</a></h2><h2 id=extract-certificate-key-pair>Extract certificate key pair<a title="Permanent link" class=headerlink href=#extract-certificate-key-pair>¬∂</a></h2><p>Self signed certificate in pfx format is usually stored in the Azure Key-vault Certificates store. A Kubernetes Secret can be created directly in terraform to load the cert from Azure Key-vault.<p>The pfx cert include both the private key and certificate. Use the following commands to extract the key pair (tls.key and tls-raw.crt) from the pfx file:<div class=highlight><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>openssl<span class=w> </span>pkcs12<span class=w> </span>-in<span class=w> </span>tls.pfx<span class=w> </span>-nocerts<span class=w> </span>-out<span class=w> </span>tls-encrypted.key
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>openssl<span class=w> </span>pkcs12<span class=w> </span>-in<span class=w> </span>tls.pfx<span class=w> </span>-clcerts<span class=w> </span>-nokeys<span class=w> </span>-out<span class=w> </span>tls-raw.crt
<a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a>openssl<span class=w> </span>rsa<span class=w> </span>-in<span class=w> </span>tls-encrypted.key<span class=w> </span>-out<span class=w> </span>tls.key
</code></pre></div> Note that when extracting the key pair, a passphrase is required which should be recorded when generating the cert. The tls.crt file should include all level (local, intermediate, and root from top to bottome) certificate files in the chain. After downloading the CA certificates from the web browser, run the following commands to concatenation the certificates to one file: <div class=highlight><pre><span></span><code><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>cp<span class=w> </span>tls-raw.crt<span class=w> </span>tls.crt
<a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a>cat<span class=w> </span>intermediate-ca.crt<span class=w> </span>>>tls.crt
<a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a>cat<span class=w> </span>root-ca.crt<span class=w> </span>>>tls.crt
</code></pre></div><h2 id=update-server-certificate-in-kubernetes>Update server certificate in Kubernetes<a title="Permanent link" class=headerlink href=#update-server-certificate-in-kubernetes>¬∂</a></h2><p>In the Kubernetes cluster, the server certificate key pair is installed into the cluster Secrets store for the <code>traefik</code> ingress controller application. To directly update the key pair in the cluster, run<div class=highlight><pre><span></span><code><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=nv>key</span><span class=o>=</span><span class=k>$(</span>base64<span class=w> </span>&lt;<span class=w> </span><span class=s2>"./tls.key"</span><span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span>-d<span class=w> </span><span class=s1>'\n'</span><span class=k>)</span>
<a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=nv>crt</span><span class=o>=</span><span class=k>$(</span>base64<span class=w> </span>&lt;<span class=w> </span><span class=s2>"./tls.crt"</span><span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span>-d<span class=w> </span><span class=s1>'\n'</span><span class=k>)</span>
<a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a>kubectl<span class=w> </span>patch<span class=w> </span>secret<span class=w> </span>tls-cert<span class=w> </span>-n<span class=w> </span>traefik<span class=w> </span><span class=se>\</span>
<a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>    </span>-p<span class=w> </span><span class=s2>"{\"data\":{\"tls.key\":\"</span><span class=si>${</span><span class=nv>key</span><span class=si>}</span><span class=s2>\",\"tls.crt\":\"</span><span class=si>${</span><span class=nv>crt</span><span class=si>}</span><span class=s2>\"}}"</span>
</code></pre></div><h3 id=check-the-cert-works-or-not>check the cert works or not<a title="Permanent link" class=headerlink href=#check-the-cert-works-or-not>¬∂</a></h3><ul><li><p>do not use a webbrowser - there is cache and delay - not reliable</p><li><p>use <code>curl -kv https:example.com</code></p></ul><h3 id=check-the-ingress-controller-logs>check the ingress controller logs<a title="Permanent link" class=headerlink href=#check-the-ingress-controller-logs>¬∂</a></h3><p>The ingress should be integrated with one of the ingress controller (traefik, nginx, and ?). check the log of the ingress controller pod logs.<h3 id=tls-failed-to-parse-private-key>tls: failed to parse private key<a title="Permanent link" class=headerlink href=#tls-failed-to-parse-private-key>¬∂</a></h3><p>For cetificate issues, check the ingress controller pod logs<div class=highlight><pre><span></span><code><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>k -n &lt;namespace> logs &lt;ingress-controller-pod> | grep certificate
</code></pre></div> Solution: the private key has a passphrase. The private key should be unencrypted. Note that tls.crt should include the intermediate ca. <h3 id=tls-private-key-does-not-match-public-key>tls: private key does not match public key<a title="Permanent link" class=headerlink href=#tls-private-key-does-not-match-public-key>¬∂</a></h3><p>Used the wrong public key or the server public key is not placed in the file first (should be server, intermediate, root keys)<h3 id=skipping-addition-of-certificate-for-domains-examplecomexamplecom-to-entrypoint-https-as-it-already-exists-for-this-entrypoint>Skipping addition of certificate for domain(s) \"example.com,*.example.com\", to EntryPoint https, as it already exists for this Entrypoint<a title="Permanent link" class=headerlink href=#skipping-addition-of-certificate-for-domains-examplecomexamplecom-to-entrypoint-https-as-it-already-exists-for-this-entrypoint>¬∂</a></h3><ul><li><p>run <code>curl -kv https://dev.example.com</code> and still get the old certificate. Restart the ingress controller pods (some report indicates that the old cert can still be used) and check the pod logs,</p><li><p><code>Error configuring TLS for ingress dev/sales-api: secret dev/example.com-tls-cert does not exist</code>. Updated the Secret with the same name in another namespace but not in the ingress controller namespace.</p></ul><h2 id=install-root-and-intermediate-ca-files-for-devexamplecom-domain>Install root and intermediate CA files for dev.example.com domain<a title="Permanent link" class=headerlink href=#install-root-and-intermediate-ca-files-for-devexamplecom-domain>¬∂</a></h2><p>For self-signed certificate in the certificate chain, both the root and intermediate CA files should be installed in the certificate trust store to avoid the error <code>self signed certificate in certificate chain</code>.<p>In the docker base image:<ul><li><p>First add all the new certificate files into the docker folder.</p><li><p>Then update the base.docker file add <code>COPY root-ca.crt intermediate-ca.crt /usr/local/share/ca-certificates/extra/</code> and <code>RUN update-ca-certificates</code>.</p><li><p>At last, make a new release of the base and rebuild all applications using this new base image.</p></ul><p>Question: can we map the cert files to a volume so we do not need to update the docker image after cert renewal? what's the prons and cons?</article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button class="md-top md-icon" data-md-component=top hidden type=button><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top</button></main><footer class=md-footer><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright><div class=md-copyright__highlight><a title="Go to Main Home Page" href=/>üè† Back to Home</a><br> Copyright ¬© 2026 Sean Ma <br>Last updated on 17 Jan 2026</div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "navigation.expand", "navigation.indexes", "navigation.top", "toc.follow", "search.suggest", "search.highlight", "content.code.copy", "navigation.prune"], "search": "../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script><script src=../../../../assets/javascripts/bundle.56ea9cef.min.js></script>